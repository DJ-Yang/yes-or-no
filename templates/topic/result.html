{% extends 'base.html' %}

{% load static %}

{% block head_meta %}
<meta name="description" content="{{ topic.description }}" />
<meta property="og:title" content="{{ topic.title }}" />
<meta property="og:image" content="{{ topic.thumb_image.url }}" />
<meta property="og:description" content="{{ topic.description }}" />
{% endblock %}

{% block head_link %}
<link rel="stylesheet" href="{% static 'css/result.css' %}">
<link rel="stylesheet" href="{% static 'css/result_chart.css' %}">
{% endblock %}

{% block head_script %}
<script type="text/javascript">
    function share() {
        var url = encodeURI(encodeURIComponent(myform.url.value));
        var title = encodeURI(myform.title.value);
        var shareURL = "https://share.naver.com/web/shareView.nhn?url=" + url + "&title=" + title;
        window.open(shareURL);
    }
</script>


{% endblock %}

{% block content %}
<div class="topic-wrapper">
    <div class="topic-background">
        <div class="topic-thumb" style="background-image: url('{{topic.thumb_image.url}}')">
        </div>

        <div class="topic-title-box">
      <div class="topic-title">{{topic.title}}</div>
      <div class="topic-subtitle">{{topic.content}}</div>

            <div class="btn-box">
                <a href="{% url 'topic:select' topic.pk %}">
                <div class="btn revoting-btn">
                    <img src="{% static 'img/checked.png' %}" width="15px">
                    다시하기
                </div>
            </a>
                <div class="btn share-btn">
                    <img src="{% static 'img/share.png' %}" width="12px">
                    공유하기
                </div>
            </div>
        </div>
    </div>

    <div class="select-wrapper">
        <div class="select-box">
            <div class="total-chart-box">
                <div id="chart1"></div>
            </div>
            <div class="selection">
                <div class="selection-text selection-active">1. 1번 선택지 내용입니드아아</div>
                <div class="selection-text">2. 2번 선택지 내용입니드아아</div>
                <div class="selection-text">3. 3번 선택지 내용입니드아아</div>
                <div class="selection-text">4. 4번 선택지 내용입니드아아</div>
            </div>
        </div>
    </div>

    <div class="topic-analysis-box">
        <div class="analysis-title-row">
            <div class="category">
                <img src="{% static 'img/chart.png' %}" alt="">
                분야별
            </div>
            <div class="date">
                <img src="{% static 'img/date.png' %}" alt="">
                기간별
            </div>
        </div>
        <div>
            <div class="chart-row">
                <div class="chart-box">
                    <div class="chart-title">종합 분석결과</div>
                    <div style="display: flex; height: fit-content; justify-content: center;">
                        <div id="chart2"></div>
                        <div id="chart"></div>
                    </div>
                    <div class="label-box">
                        <span class="label one"><i class="fa fa-circle" aria-hidden="true"></i> 1번</span>
                        <span class="label two"><i class="fa fa-circle" aria-hidden="true"></i> 2번</span>      
                        <span class="label three"><i class="fa fa-circle" aria-hidden="true"></i> 3번</span>      
                        <span class="label four"><i class="fa fa-circle" aria-hidden="true"></i> 4번</span>      
                    </div>
                </div>
                <div class="chart-box">
                    <div class="chart-title">연령대별 분석결과</div>
                    <div id="chart3"></div>
                    <div class="label-box">
                        <span class="label one"><i class="fa fa-circle" aria-hidden="true"></i> 1번</span>
                        <span class="label two"><i class="fa fa-circle" aria-hidden="true"></i> 2번</span>      
                        <span class="label three"><i class="fa fa-circle" aria-hidden="true"></i> 3번</span>      
                        <span class="label four"><i class="fa fa-circle" aria-hidden="true"></i> 4번</span>      
                    </div>
                </div> 
                <div class="chart-box">
                    <div class="chart-title">성별 분석결과</div>
                    <div class="age-title">
                        <div>남성</div>
                        <div>여성</div>
                    </div>
                    <div class="age-chart">
                        <div id="chart4"></div>
                        <div id="chart5"></div>
                    </div>
                    <div class="label-box">
                        <span class="label one"><i class="fa fa-circle" aria-hidden="true"></i> 1번</span>
                        <span class="label two"><i class="fa fa-circle" aria-hidden="true"></i> 2번</span>      
                        <span class="label three"><i class="fa fa-circle" aria-hidden="true"></i> 3번</span>      
                        <span class="label four"><i class="fa fa-circle" aria-hidden="true"></i> 4번</span>      
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="{% static 'js/apexcharts.js' %}"></script>
<script>
    var options = {
        series: [44, 55, 13, 43],
        chart: {
            type: 'pie',
            
        },
        labels: ['A', 'B', 'C', 'D'],
        dataLabels: {
            enabled: true,
            textAnchor: 'start',
            formatter: function (val, opts) {
                console.log(val, opts)
                return Math.round(val) + '%';
            },
            style: {
                fontSize: '14px',
                fontFamily: 'Helvetica, Arial, sans-serif',
                fontWeight: 'regular',
            },
        },
        legend: {
            show: false
        },
        tooltip: {
            enabled: false
        }
    };

    var chart = new ApexCharts(document.querySelector("#chart1"), options);
    chart.render();
</script>
<script>
    var options = {
        series: [44, 55, 13, 43],
        chart: {
            type: 'pie',
            width:260,
        },
        responsive: [
            {
                breakpoint: 480,
                options: {
                    chart: {
                        width: 230
                    },
                }
            },
            {
                breakpoint: 425,
                options: {
                    chart : {
                        width: 200
                    }
                }
            },
            {
                breakpoint: 375,
                options: {
                    chart : {
                        width: 180
                    }
                }
            }
        
        ],
        labels: ['A', 'B', 'C', 'D'],
        dataLabels: {
            enabled: true,
            textAnchor: 'start',
            formatter: function (val, opts) {
                console.log(val, opts)
                return Math.round(val) + '%';
            },
            style: {
                fontSize: '14px',
                fontFamily: 'Helvetica, Arial, sans-serif',
                fontWeight: 'regular',
            },
        },
        legend: {
            show: false
        },
        tooltip: {
            enabled: false
        }
    };

    var chart = new ApexCharts(document.querySelector("#chart4"), options);
    chart.render();
</script>
<script>
    var options = {
        series: [44, 55, 13, 43],
        chart: {
            type: 'pie',
            width:260,
            
        },
        responsive: [
            {
                breakpoint: 480,
                options: {
                    chart: {
                        width: 230,
                    },
                }
            },
            {
                breakpoint: 425,
                options: {
                    chart : {
                        width: 200
                    }
                }
            },
            {
                breakpoint: 375,
                options: {
                    chart : {
                        width: 180
                    }
                }
            }
        
        ],
        labels: ['A', 'B', 'C', 'D'],
        dataLabels: {
            enabled: true,
            textAnchor: 'start',
            formatter: function (val, opts) {
                console.log(val, opts)
                return Math.round(val) + '%';
            },
            style: {
                fontSize: '14px',
                fontFamily: 'Helvetica, Arial, sans-serif',
                fontWeight: 'regular',
            },
        },
        legend: {
            show: false
        },
        tooltip: {
            enabled: false
        }
    };

    var chart = new ApexCharts(document.querySelector("#chart5"), options);
    chart.render();
</script>

<script>
    var options = {
        series: [{
            name: 'Net Profit',
            data: [44, 55, 57, 56, 61, 58]
        }, {
            name: 'Revenue',
            data: [76, 85, 101, 98, 87, 105]
        }, {
            name: 'Free Cash Flow',
            data: [35, 41, 36, 26, 45, 48]
        }, {
            name: 'Free Cash Flow',
            data: [15, 34, 22, 35, 11, 30]
        }],
        chart: {
            type: 'bar',
            width: '100%',
            height: 320,
            toolbar: {
                show: false
            }
        },
        responsive: [
            {
                breakpoint: 480,
                options: {
                    chart: {
                        height: 230
                    },
                }
            }
        ],
        plotOptions: {
            bar: {
                horizontal: false,
                columnWidth: '55%',
                endingShape: 'rounded'
            },
        },
        dataLabels: {
            enabled: false
        },
        stroke: {
            show: true,
            width: 2,
            colors: ['transparent']
        },
        xaxis: {
            categories: ['10대', '20대', '30대', '40대', '50대', '60대'],
        },
        fill: {
            opacity: 1
        },
        tooltip: {
            y: {
                formatter: function (val) {
                    return val + '%'
                }
            }
        },
        legend: {
            show: false
        }
    };

    var chart = new ApexCharts(document.querySelector("#chart3"), options);
    chart.render();
</script>
<script>
    var options = {
        series: [{
            name: 'Marine Sprite',
            data: [24, 35, 21, 37, 22, 43]
        }, {
            name: 'Striking Calf',
            data: [13, 13, 33, 22, 13, 13]
        }, {
            name: 'Tank Picture',
            data: [12, 17, 11, 9, 15, 11]
        }, {
            name: 'Tank Picture',
            data: [12, 17, 11, 9, 15, 11]
        },
        ],
        chart: {
            type: 'bar',
            height: '100%',
            width: 210,
            height: 320,
            stacked: true,
            toolbar: {
                show: false
            }
        },
        responsive: [
            {
                breakpoint: 480,
                options: {
                    chart: {
                        width: 220,
                        height: 230
                    },
                }
            },
            {
                breakpoint: 425,
                options: {
                    chart : {
                        width: 200
                    }
                }
            },
            {
                breakpoint: 375,
                options: {
                    chart : {
                        width: 180
                    }
                }
            }
        
        ],
        plotOptions: {
            bar: {
                horizontal: true,
            },
        },
        xaxis: {
            categories: ['10대', '20대', '30대', '40대', '50대', '60대'],
            tickAmount: 4,
            max: 100,
            labels: {
                formatter: function (val) {
                    return val + "%"
                }
            },

        },
        yaxis: {
            labels: {
                show: true
            }
        },
        tooltip: {
            y: {
                formatter: function (val) {
                    return val + "K"
                }
            }
        },
        fill: {
            opacity: 1
        },
        legend: {
            show: false
        },
        grid: {
            show: true,
            yaxis: {
                lines: {
                    show: true
                }
            }

        },
        dataLabels: {
            enabled: false
        },
    };

    var chart = new ApexCharts(document.querySelector("#chart"), options);
    chart.render();

    var options2 = {
        series: [{
            name: 'Marine Sprite',
            data: [4, 15, 11, 17, 22, 23]
        }, {
            name: 'Striking Calf',
            data: [53, 32, 33, 52, 13, 43]
        }, {
            name: 'Tank Picture',
            data: [12, 17, 11, 9, 15, 11]
        }, {
            name: 'Tank Picture',
            data: [12, 17, 11, 9, 15, 11]
        },
        ],
        chart: {
            type: 'bar',
            height: '100%',
            width: 210,
            height: 320,
            stacked: true,
            toolbar: {
                show: false
            }
        },
        responsive: [
            {
                breakpoint: 480,
                options: {
                    chart: {
                        width: 220,
                        height: 230
                    },
                }
            },
            {
                breakpoint: 425,
                options: {
                    chart : {
                        width: 200
                    }
                }
            },
            {
                breakpoint: 375,
                options: {
                    chart : {
                        width: 180
                    }
                }
            }
        
        ],
        plotOptions: {
            bar: {
                horizontal: true,
            },
        },
        xaxis: {
            categories: ['10대', '20대', '30대', '40대', '50대', '60대'],
            tickAmount: 4,
            max: 100,
            labels: {
                formatter: function (val) {
                    return val + "%"
                }
            }
        },
        yaxis: {
            reversed: true,
            labels: {
                show: false
            }
        },
        tooltip: {
            y: {
                formatter: function (val) {
                    return val + "K"
                }
            }
        },
        fill: {
            opacity: 1
        },
        legend: {
            show: false
        },
        grid: {
            show: true,
            yaxis: {
                lines: {
                    show: true
                }
            },
        },
        dataLabels: {
            enabled: false
        },
    };




    var chart2 = new ApexCharts(document.querySelector("#chart2"), options2);
    chart2.render();
</script>
{% endblock %}



{% block extra_js %}
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="{% static 'js/result.js' %}"></script>

{% endblock %}