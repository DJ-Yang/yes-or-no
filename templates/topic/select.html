{% extends 'base.html' %}

{% load static %}

{% block header %}
<link rel="stylesheet" href="{% static 'css/select.css' %}">
{% endblock %}

{% block content %}
<div class="topic">
  <div class="topic-title">
    {{ topic.title }}
  </div>
  <div class="topic-graph-wrap">
    <div class="label-agree">30%</div>
    <div class="label-disagree">70%</div>
    <div class="agree">
    </div>
  </div>
  <div class="selection">
    <div class="selection1">
      <img id="sel1" src="{{ topic.selection1_image.url}}" onclick="clickSelection(this.id)">
      <span>{{topic.selection1_des}}</span>
    </div>
    <div class="vs">vs</div>
    <div  class="selection2">
      <img id="sel2" src="{{ topic.selection2_image.url}}" onclick="clickSelection(this.id)">
      <span>{{topic.selection2_des}}</span>
    </div>
    
  <div class="_baa_">

  </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}

<!-- selection 선택시 함수 -->
<script>
function clickSelection(e) {

  let target = e;
  let selection;
  let topic_id = '{{topic.id}}'
  let type;
  let checkUserLogin = '{{ request.user }}';

  if (!(checkUserLogin === 'AnonymousUser')) {
    if (target == 'sel1') {
      selection_des = '{{topic.selection1_des}}';
      type = 0;
    } else if (target == 'sel2') {
      selection_des = '{{topic.selection2_des}}';
      type = 1;
    } else {
      selection_des = 'error';
    }
    if (selection_des != 'error' || !selection_des) {
      selectType(selection_des, topic_id, type)    
    }
  } else {
    alert('로그인이 필요한 작업입니다.');
  }
}
</script>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" src="{% static 'js/topic.js' %}?4"></script>
{% endblock %}